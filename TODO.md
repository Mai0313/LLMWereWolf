## 檢查專案代碼邏輯

修改確認範圍:

- 狼人殺遊戲邏輯是否正確
- 代碼是否需要優化, 例如是否有充分利用 `pydantic` 來實現更好的結構化和驗證
- 狼人殺規則完整性, 部分特殊角色能力未實現, 詳情可以參考 `rule.md`
- 保存/加載遊戲 - 使用 Pydantic 序列化 GameState
- 重構複雜函數 - 將 run_voting_phase 拆分為更小的函數
- 狼人協商機制 - 實現多隻狼人投票決定殺人目標

當任務完成時 請務必記得透過 `uv run pre-commit run -a` 來確保代碼質量

## 循環導入

幫我檢查一下我的專案的 import, 我認為目前的 import 很亂
另外 import 應該放在檔案最上面 而不是透過延遲import 來規避循環導入

我認為應該從根源上處理 而不是像現在這樣

而且不需要每個功能都往外開放, 只需要將這個專案理解為三種分開的功能

- ai (控制參與玩家 或 參與AI)
- 狼人殺遊戲核心邏輯
- ui (tui)

這部分應該要重新規劃

## 請幫我使用 TypeAlias

請幫我找一下 Codebase 中是否有類似這種 `AgentType = DemoAgent | HumanAgent | LLMAgent`
我希望可以改成透過 `TypeAlias`, `Annotated` 最後再用 `PropertyInfo(discriminator="type")` 來處理

## 確認遊戲邏輯中 夜間行動 是如何完成的

## 更新規則

請查看 `./src/llm_werewolf/core` 這裡是我的狼人殺遊戲邏輯代碼
請幫我將目前我這個專案的規則 透過繁體中文寫成 `rule.md`

我需要你參考真實的狼人殺規則與角色 與 我現在完成的規則與角色完成這份文件
如果有缺少的規則或角色 請另外標註出來

## 新增警長規則

## 新增奇蹟商人

## 新增狼王, 狼美人 和 狼人自爆規則

狼王規則要特別注意一種情況 例如 夜晚可能在某些情況下可以與狼人們討論戰略, 有時候只有狼王能發言 有時候好像狼人也能參與討論
這部分以你知道的規則為主 因為我的不一定是正確的

我記得有一個規則是狼人可以自爆, 狼王也能自爆
但差別在狼王自爆可以帶走一名玩家
自爆後直接進入黑夜

狼美人 基本上就是多了魅惑技能
